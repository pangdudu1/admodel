<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>借款信息</title>
    <script src="./wap/js/jquery.min.js"></script>
    <script src="./wap/js/rem.js"></script>
    <link rel="stylesheet" href="./wap/css/init.css">
    <link rel="stylesheet" href="./wap/css/index.css">
    <link rel="stylesheet" href="./wap/css/ystep.css">
    <link rel="stylesheet" href="./wap/swiper/public.css">
    <link rel="stylesheet" href="./wap/swiper/swiper.min.css">
    <script src="./wap/swiper/dySeleect.js"></script>
    <script src="./wap/swiper/swiper.min.js"></script>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            background: #F5F6FA
                /* background: linear-gradient(35deg, #82EEC8, #7258FF); */
        }
    </style>
</head>

<body>
    <div class="loan_wrap">
        <div class="loan_header">
            <div class="loan_head_one">
                <div class="loan_hl left"><img src="./wap/img/left2.png" alt=""></div>
                <div class="loan_htxt left"><span>Informasi pinjaman</span></div>
            </div>
            <div class="loan_head_two">
                <ul class="loan_tab">
                    <li tabid="1" class="loanactive">Sekali bayar</li>
                    <li tabid="2">Ciclian</li>
                </ul>
            </div>
        </div>
        <div class="height"></div>
        <div class="loan_bottom">
            <div id="box">
                <!-- 一次性借款里面的内容 -->
                <div class="tab-item">
                    <div class="item_one">
                        <p class="sm_title padd">Jumlah Pinjaman</p>
                        <div class="item_rp padd"><span>Rp</span><span class="slider-num">1.400.000</span><span
                                class="right loan_img btn1"><img src="./wap/img/xia.png" alt=""></span></div>
                        <div class="select_box select_box1"></div>
                        <div class="item_num padd" style="display: none;">
                            <span class="left">Rp0.00</span><span class="right">Rp3000.00</span>
                        </div>
                        <!-- <div class="slider-panel">
                            <div class="slider-box">
                                <p class="slider-value" id="slider-value"></p>
                                <input type="range" min="0" step="1" max="80000000" value="1500" id="slider">
                            </div>
                            <div id="demo1"></div>
                        </div> -->
                        <div class="stepCont stepCont1" style="display: none;">
                            <div class='ystep-container ystep-lg ystep-blue'></div>
                            <div class="pageCont">
                                <div id="page1" class="stepPage">
                                    <h1>page1</h1>
                                </div>
                            </div>
                        </div>
                        <p class="sm_title padd">Meminjam tenggat wak</p>
                        <div class="item_radio">
                            <ul class="item_check">
                                <li>
                                    <!-- 给input加事件的时候 不要操作class -->
                                    <input type="radio" name="dietaryPres" id="dietaryPres1" value="1" class="checkbox">
                                    <label class="checkbox" for="dietaryPres1">7 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres" id="dietaryPres" value="1" class="checkbox">
                                    <label class="checkbox" for="dietaryPres">7 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres" id="dietaryPres2" value="1" class="checkbox">
                                    <label class="checkbox" for="dietaryPres2">14 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres" id="dietaryPres3" value="1" class="checkbox">
                                    <label class="checkbox" for="dietaryPres3">14 hari</label>
                                </li>
                            </ul>
                        </div>

                    </div>
                    <div class="item_one">
                        <ul class="biayalist">
                            <li>
                                <span>Biaya tambanhan</span>
                                <span>Rp13.00</span>
                            </li>
                            <li>
                                <span>Suku bunga</span>
                                <span>Rp25.00</span>
                            </li>
                            <li>
                                <span>Sebenarnya akan dikirim</span>
                                <span>Rp1.400.000</span>
                            </li>
                            <li>
                                <span>Biaya tambanhan</span>
                                <span>Rp1322.00</span>
                            </li>
                            <li>
                                <span>Waktu pembayaran</span>
                                <span>Rp1322.00</span>
                            </li>
                        </ul>
                    </div>
                    <div class="agreement">
                        <input type="checkbox" id="agreement" class="input">
                        <label for="agreement">
                            Sudah dibaca
                        </label>

                        <a href="">《xxx》</a>



                    </div>
                    <button class="segera">Segera rentenir</button>
                </div>
                <!-- 一次性借款里面的内容结束 -->
                <!-- 分期内容 -->
                <div class="tab-item">
                    <div class="item_one">
                        <p class="sm_title padd">Jumlah Pinjaman</p>
                        <div class="item_rp padd"><span>Rp</span><span class="slider-num1">1.400.000</span><span
                                class="right loan_img btn2"><img src="./wap/img/xia.png" alt=""></span></div>
                        <div class="select_box select_box2"></div>
                        <div class="item_num padd" style="display: none;">
                            <span class="left">Rp0.00</span><span class="right">Rp3000.00</span>
                        </div>
                        <div class="slider-panel1"  style="display: none;">
                            <div class="slider-box1">
                                <p class="slider-value1"></p>
                                <input type="range" min="0" step="1" max="50" value="12" id="slider1">
                            </div>

                        </div>
                        <p class="sm_title padd">Meminjam tenggat wak</p>
                        <div class="item_radio">
                            <ul class="item_check">
                                <li>
                                    <!-- 给input加事件的时候 不要操作class -->
                                    <input type="radio" name="dietaryPres1" id="dietaryPres_1" value="1"
                                        class="checkbox">
                                    <label class="checkbox" for="dietaryPres_1">7 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres1" id="dietaryPres_2" value="1"
                                        class="checkbox">
                                    <label class="checkbox" for="dietaryPres_2">7 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres1" id="dietaryPres_3" value="1"
                                        class="checkbox">
                                    <label class="checkbox" for="dietaryPres_3">14 hari</label>
                                </li>
                                <li>
                                    <input type="radio" name="dietaryPres1" id="dietaryPres_4" value="1"
                                        class="checkbox">
                                    <label class="checkbox" for="dietaryPres_4">11 hari</label>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="item_one">
                        <p class="sm_title pembay">Pembayaran dengan detail</p>
                        <div class="vertical">
                            <div class="vertical-text">
                                <p class="vertione">1 periode</p>
                                <p class="vertitwo">2019/12/28</p>
                            </div>
                            <div class="vertical-circle"></div>
                            <div class="vertical-text1">
                                <p class="vertithree">Rp200.00</p>
                                <p class="vertithfore">Pokok 100.00 + Suku bung 50.00
                                    + Biaya tambahan 50.00</p>
                            </div>
                            <div class="vertical-line"></div>

                            <div class="vertical-text">
                                <p class="vertione">2 periode</p>
                                <p class="vertitwo">2019/12/28</p>
                            </div>
                            <div class="vertical-circle1"></div>
                            <div class="vertical-text1">
                                <p class="vertithree">Rp200.00</p>
                                <p class="vertithfore">Pokok 100.00 + Suku bung 50.00
                                    + Biaya tambahan 50.00</p>
                            </div>
                            <div class="vertical-line"></div>

                            <div class="vertical-text">
                                <p class="vertione">3 periode</p>
                                <p class="vertitwo">2019/12/28</p>
                            </div>
                            <div class="vertical-circle2"></div>
                            <div class="vertical-text1">
                                <p class="vertithree">Rp200.00</p>
                                <p class="vertithfore">Pokok 100.00 + Suku bung 50.00
                                    + Biaya tambahan 50.00</p>
                            </div>
                            <div class="vertical-line"></div>
                        </div>

                    </div>
                    <div class="agreement">
                        <input type="checkbox" name="agreement" id="agreement">
                        <label for="agreement">
                            Sudah dibaca
                        </label>
                        <a href="">《xxx》</a>
                    </div>
                    <button class="segera">Segera rentenir</button>
                </div>
            </div>
        </div>



    </div>
    </div>
    <script>
        /**
     * Created by changwang.song on 2017/12/26.
     */
        function extend(obj1, obj2) {
            for (var attr in obj2) {
                obj1[attr] = obj2[attr];
            }
        }
        function SetStep(arg) {
            this.body = document.body;
            this.opt = {
                show: false,
                content: '.stepCont',
                pageCont: '.pageCont',
                imgWidth: 20,
                stepContainerMar: 20,
                nextBtn: '.nextBtn',
                prevBtn: '.prevBtn',
                steps: ['发起', '募捐', '进行', '结束', '庆祝', 'as', 'sdsd'],
                //pageClass:'',//分页的类或则id
                stepCounts: 6,//总共的步骤数
                curStep: 1,//当前显示第几页
                animating: false,
                showBtn: true,//是否生成上一步下一步操作按钮
                clickAble: true,//是否可以通过点击进度条的节点操作进度
                onLoad: function () {

                }
            }
            this.init(arg)
        }
        //初始化 生成页面的进度条和按钮
        SetStep.prototype.init = function (arg) {
            var _that = this;
            extend(this.opt, arg);
            this.opt.stepCounts = this.opt.steps.length;
            this.content = $(this.opt.content);
            this.pageCont = this.content.find(this.opt.pageCont)
            var w_con = $(this.content).width();
            var w_li = (w_con - this.opt.stepContainerMar * 2) / this.opt.stepCounts / 2;
            var stepContainer = this.content.find('.ystep-container');
            this.stepContainer = stepContainer;
            var stepsHtml = $("<ul class='ystep-container-steps'></ul>");
            var stepDisc = "<li class='ystep-step ystep-step-undone'></li>";
            var stepP = $("<div class='ystep-progress'>" +
                "<p class='ystep-progress-bar'><span class='ystep-progress-highlight' style='width:0%'></span></p>" +
                "</div>");
            var stepButtonHtml = $("<div class='step-button'><button type='button' class='btn btn-default prevBtn' id='prevBtn' class='prevBtn'>上一步</button>" +
                "<button type='button' class='btn btn-default nextBtn' id='nextBtn' class='nextBtn'>下一步</button></div>");
            stepP.css('width', w_li * 2 * (this.opt.stepCounts - 1));
            stepP.find('.ystep-progress-bar').css('width', w_li * 2 * (this.opt.stepCounts - 1))
            for (var i = 0; i < this.opt.stepCounts; i++) {
                if (i == 0) {
                    var _s = $(stepDisc).text(this.opt.steps[i]).addClass('')
                } else {
                    var _s = $(stepDisc).text(this.opt.steps[i])
                }
                stepsHtml.append(_s);
            }
            stepsHtml.find('li').css('width', '40px').css('marginRight', w_li * 2 - 40)
            stepContainer.append(stepsHtml).append(stepP);

            stepContainer.css('left', (w_con - stepP.width() - this.opt.imgWidth - 10 - this.opt.stepContainerMar * 2) / 2)
            this.content.css('overflow', 'hidden')
            this.setProgress(this.stepContainer, this.opt.curStep, this.opt.stepCounts)
            //判断参数 是否显示按钮 并绑定点击事件
            if (this.opt.showBtn) {
                this.content.append(stepButtonHtml)
                this.prevBtn = this.content.find(this.opt.prevBtn)
                this.nextBtn = this.content.find(this.opt.nextBtn)
                this.prevBtn.on('click', function () {
                    // if($(this).hasClass('handleAble')){
                    if ($(_that).attr('disabled') || _that.opt.animating) {
                        return false;
                    } else {
                        _that.opt.animating = true;
                        _that.opt.curStep--;
                        _that.setProgress(_that.stepContainer, _that.opt.curStep, _that.opt.stepCounts)
                    }
                })
                this.nextBtn.on('click', function () {
                    // if($(this).hasClass('handleAble')){
                    if ($(_that).attr('disabled') || _that.opt.animating) {
                        return false;
                    } else {
                        _that.opt.animating = true;
                        _that.opt.curStep++;
                        _that.setProgress(_that.stepContainer, _that.opt.curStep, _that.opt.stepCounts)
                    }
                })
            }
            //判断时候可点击进度条 并绑定点击事件
            if (this.opt.clickAble) {
                stepsHtml.find('li').on('click', function () {
                    _that.opt.curStep = $(this).index() + 1;
                    _that.setProgress(_that.stepContainer, _that.opt.curStep, _that.opt.stepCounts)
                })
            }
            $(window).resize(function () {
                var w_con = $(_that.content).width();
                var w_li = w_con / _that.opt.stepCounts / 2;
                stepP.css('width', w_li * 2 * (_that.opt.stepCounts - 1));
                stepP.find('.ystep-progress-bar').css('width', w_li * 2 * (_that.opt.stepCounts - 1))
                stepsHtml.find('li').css('width', '40px').css('marginRight', w_li * 2 - 40)
                stepContainer.css('left', (w_con - stepP.width() - _that.opt.imgWidth - 10 - _that.opt.stepContainerMar * 2) / 2)
            })
        }
        //设置进度条
        SetStep.prototype.setProgress = function (n, curIndex, stepsLen) {
            var _that = this;
            //获取当前容器下所有的步骤
            var $steps = $(n).find("li");
            var $progress = $(n).find(".ystep-progress-highlight");
            //判断当前步骤是否在范围内
            if (1 <= curIndex && curIndex <= $steps.length) {
                //更新进度
                var scale = "%";
                scale = Math.round((curIndex - 1) * 100 / ($steps.length - 1)) + scale;
                $progress.animate({
                    width: scale
                }, {
                    speed: 1000,
                    done: function () {
                        //移动节点
                        $steps.each(function (j, m) {
                            var _$m = $(m);
                            var _j = j + 1;
                            if (_j < curIndex) {
                                _$m.attr("class", "ystep-step-done");
                            } else if (_j === curIndex) {
                                _$m.attr("class", "ystep-step-active");
                            } else if (_j > curIndex) {
                                _$m.attr("class", "ystep-step-undone");
                            }
                        })
                        if (_that.opt.showBtn) {
                            if (curIndex == 1) {
                                _that.prevBtn.attr('disabled', 'true')
                                _that.nextBtn.removeAttr('disabled')
                            } else if (curIndex == stepsLen) {
                                _that.prevBtn.removeAttr('disabled')
                                _that.nextBtn.attr('disabled', 'true')
                            } else if (1 < curIndex < stepsLen) {
                                _that.prevBtn.removeAttr('disabled')
                                _that.nextBtn.removeAttr('disabled')
                            }
                        }
                        _that.checkPage(_that.pageCont, _that.opt.curStep, _that.opt.stepCounts)
                        _that.opt.animating = false;
                    }
                });
            } else {
                return false;
            }
        }
        //改变 分页显示
        SetStep.prototype.checkPage = function (pageCont, curStep, steps) {
            for (var i = 1; i <= steps; i++) {
                if (i === curStep) {
                    pageCont.find('#page' + i).css("display", "block");
                } else {
                    pageCont.find('#page' + i).css("display", "none");
                }
            }
        }
    </script>
    <script type="text/javascript">
        $(function () {
            var hgS1 = new selectSwiper({
                el: '.select_box1',
                data: ['吃饭', '睡觉', '打豆豆', '212121'],
                init: function (index) {
                    if (index !== -1) {
                        // $('.btn1').html(this.data[index]);
                    }
                },
                okFunUndefind: function () {
                    alert('必须选择一项');
                    return false;
                },
                okFun: function (index) {
                    console.log(index);
                    // $('.btn1').html(this.data[index]);
                },
                closeFun: function () {
                    console.log('取消');
                },
            });
            $('.btn1').on('click', function () {
                hgS1.openSelectSwiper();
            });
            var hgS2 = new selectSwiper({
                el: '.select_box2',
                data: ['吃饭', '睡觉', '打豆豆', '212121'],
                init: function (index) {
                    if (index !== -1) {
                        // $('.btn2').html(this.data[index]);
                    }
                },
                okFunUndefind: function () {
                    alert('必须选择一项');
                    return false;
                },
                okFun: function (index) {
                    console.log(index);
                    // $('.btn2').html(this.data[index]);
                },
                closeFun: function () {
                    console.log('取消');
                },
            });
            $('.btn2').on('click', function () {
                hgS2.openSelectSwiper();
            });
            // tab 
            $(".tab-item").eq(0).show();
            $(".loan_tab li").on("click", function () {
                var num = $(".loan_tab li").index(this);
                $(".tab-item").hide();
                $(".tab-item").eq(num).show();
                $(this).attr("class", "loanactive");
                $(this).siblings().removeClass("loanactive");
            });
            //input
            $('#dietaryPres1').prop("checked", true);
            $('#dietaryPres_1').prop("checked", true);
            // console.log($('.checkbox').prop('checked'))
            //滑动条
            var step1 = new SetStep({
                content: '.stepCont1',
                showBtn: false,
            })
            // var num =  $('#slider').attr('max');


            // $('#slider').on('touchend click', moveSlider)//mousemove touchmove



            // 获取数组里面的下标

            // function moveSlider() {


            function getArrayIndex(arr, obj) {
                var i = arr.length;
                while (i--) {
                    if (arr[i] === obj) {
                        return i;
                    }
                }
                return -1;
            }
            Array.prototype.getArrayIndex = function (obj) {
                for (var i = 0; i < this.length; i++) {
                    if (this[i] === obj) {
                        return i;
                    }
                }
                return -1;
            }

            var arrr = [0, 1, 2, 3, 4, 500]; //数据

            var str = '';
            //    var arr1= arrr.getArrayIndex(2)
            console.log(arrr.getArrayIndex(2));

            arrr.forEach((e, index) => {
                str += `<div ids= ${e}> ${e} </div>`
            })
            // console.log(a)
            $("#demo1").html(str)
            $('#demo1').bind('click', 'div', function () {
                alert('1')
                let index = $(this).index() + 1;
                console.log(index);
            })

            var arrrlength = arrr.length;
            var arrwidth = parseInt(100 / arrrlength)

            $('#slider-value').css('width', arrwidth + '%');
            console.log(arrwidth)
            // var testarr = [1, 2, 3, 4, 5];

            // console.log(testarr.getArrayIndex(2));

            // var amountlistlength = amountlist.length;
            // var dengfe = parseInt(100 / amountlistlength);
            // var maxnum = Math.max.apply(null, amountlist); 最大值
            // var minnum = Math.min.apply(null, amountlist); 最小值
            // console.log(length);
            // let sliderValue = parseInt($(this).val());

            // let arr = [];
            // amountlist.forEach((num, index) => {
            //     arr[index] = Math.abs(num - sliderValue);
            // });
            // // console.log("差数数组：",arr)
            // let minNumLength = amountlist[getMinIndex(arr)];
            // getArrayIndex(amountlist, 1000)

            // var length1 = amountlist.length;
            // var index = getMinIndex(arr);
            // console.log(length1);
            // console.log("当前值："+sliderValue+"; 临近值："+minNumLength+";");
            // console.log($.inArray(minNumLength, arr)); 

            // console.log(100/length1);
            // $('.slider-num').text(sliderValue);
            // if(sliderValue == 0){
            // $('#slider-value').css('width', 0+ '%');
            //   }
            // }
            function getMinIndex(arr) {
                var min = arr[0];
                //声明了个变量 保存下标值
                var index = 0;
                for (var i = 0; i < arr.length; i++) {
                    if (min > arr[i]) {
                        min = arr[i];
                        index = i;
                    }
                }
                return index;
            }


            // var num1 =  $('#slider1').attr('max');

            // $('#slider1').on('mousemove touchmove touchend click', moveSlider1)
            // function moveSlider1() {
            //     let sliderValue1 = parseInt($(this).val());
            //     $('.slider-value1').css('width', sliderValue1/num1*100 + '%');
            //     // console.log(sliderValue)
            //     $('.slider-num1').text(sliderValue1);
            // }
            //颜色随机
            // function rand(number) {
            //     return Math.floor(Math.random() * number);
            // };

            // $(function () {
            //     var arr = ['#FF6073', '#54C8A3', '#7C69EF'];
            //     var arrLength = arr.length;
            //     $('.vertical-circle').css('backgroundColor', arr[rand(arrLength)]);  //取值0~6
            // })

        });

    </script>

</body>

</html>